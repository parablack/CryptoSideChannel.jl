<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Logging · CryptoSideChannel.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">CryptoSideChannel.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../ciphers/">Ciphers</a></li><li><span class="tocitem">Types</span><ul><li><a class="tocitem" href="../integer-types/">Integer Types</a></li><li class="is-active"><a class="tocitem" href>Logging</a><ul class="internal"><li><a class="tocitem" href="#Pre-defined-logging-types"><span>Pre-defined logging types</span></a></li><li><a class="tocitem" href="#Reduction-functions"><span>Reduction functions</span></a></li><li><a class="tocitem" href="#extending_log_funs"><span>Defining new methods for <code>GenericLog</code> types</span></a></li></ul></li><li><a class="tocitem" href="../masking/">Masking</a></li><li><a class="tocitem" href="../create-traces/">Create your own traces</a></li></ul></li><li><span class="tocitem">Attacks</span><ul><li><a class="tocitem" href="../../attacks/dpa/">DPA</a></li><li><a class="tocitem" href="../../attacks/cpa/">CPA</a></li><li><a class="tocitem" href="../../attacks/template/">Template</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Types</a></li><li class="is-active"><a href>Logging</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Logging</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/parablack/CryptoSideChannel.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="logging"><a class="docs-heading-anchor" href="#logging">Logging: The <code>GenericLog</code> Datatype</a><a id="logging-1"></a><a class="docs-heading-anchor-permalink" href="#logging" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="CryptoSideChannel.Logging.GenericLog" href="#CryptoSideChannel.Logging.GenericLog"><code>CryptoSideChannel.Logging.GenericLog</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct GenericLog{U,S,T}
    val::T
end</code></pre><p>The <code>GenericLog</code> datatype behaves like an integer, but additionally logs a trace of all values contained. Technically, this type appends a reduced value to an array every time a operation is performed on it.</p><p><strong>Type Arguments</strong></p><ul><li><code>T</code> is the underlying type that our type should mimic. <code>T</code> may be a primitive integer type (like <code>UInt8</code> or <code>Int</code>), or any integer-like type (for example, another instance of <code>GenericLog</code> or a <code>Masked</code> integer).</li><li><code>U</code> should be a container holding a reduction function. The purpose of this reduction function is to preprocess values of the underlying type for logging. Most commonly, only a value derived from the underlying value should be logged, like the Hamming weight or the least significant bit. Such a derived value can be computed with the reduction function. Further details can be found at <a href="#Reduction-functions">Reduction functions</a>.</li><li><code>S</code> is a <strong>closure</strong> returning the array where values should be logged to. Note that <code>S</code> must be a <a href="https://docs.julialang.org/en/v1/base/base/#Base.isbitstype">bits type</a>. This can only be the case if the array returned by <code>S</code> is a global variable.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/parablack/CryptoSideChannel.jl">source</a></section></article><p>Most operations on integers can also be performed on instances of <code>GenericLog</code>. By default, this includes the most common operations like calculations, array accesses, and more. However, it is easy to extend this functionality to other methods if desired. See the chapter on <a href="#extending_log_funs">Defining new methods for <code>GenericLog</code> types</a> for more details.</p><p>It may be useful to extract the content of a <code>GenericLog</code> type, for example, at the end of a cryptographic calculation.</p><article class="docstring"><header><a class="docstring-binding" id="CryptoSideChannel.Logging.extractValue" href="#CryptoSideChannel.Logging.extractValue"><code>CryptoSideChannel.Logging.extractValue</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">extractValue(a::GenericLog)
extractValue(a::Integer)</code></pre><p>Extracts the internal value from the <code>GenericLog</code> datatype. Behaves like the identity function if an <code>Integer</code> value is passed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/parablack/CryptoSideChannel.jl">source</a></section></article><h2 id="Pre-defined-logging-types"><a class="docs-heading-anchor" href="#Pre-defined-logging-types">Pre-defined logging types</a><a id="Pre-defined-logging-types-1"></a><a class="docs-heading-anchor-permalink" href="#Pre-defined-logging-types" title="Permalink"></a></h2><p>There are already several logging datatypes pre-defined. Creating instances of those types is as easy as specifying a closure returning the logging destination, and the underlying value.</p><p>The following logging types are already pre-defined:</p><article class="docstring"><header><a class="docstring-binding" id="CryptoSideChannel.Logging.HammingWeightLog" href="#CryptoSideChannel.Logging.HammingWeightLog"><code>CryptoSideChannel.Logging.HammingWeightLog</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">HammingWeightLog(val, stream)</code></pre><p>Creates a logging datatype that logs the <a href="https://en.wikipedia.org/wiki/Hamming_weight">Hamming weight</a> of the underlying value.</p><p><strong>Arguments</strong></p><ul><li><code>val</code>: the value that should be wrapped around.</li><li><code>stream</code>: A <strong>closure</strong> returning the array that should be logged to. Note that <code>stream</code> must be a <code>bits</code> type.</li></ul><p><strong>Example</strong></p><pre><code class="language-">DocTestSetup = quote
    using CryptoSideChannel
end</code></pre><pre><code class="language-julia-repl">julia&gt; trace = [];

julia&gt; closure = () -&gt; trace;

julia&gt; a = Logging.HammingWeightLog(42, closure)
Log{Int64, 42}
julia&gt; b = a + 1
Log{Int64, 43}
julia&gt; c = a - 42
Log{Int64, 0}
julia&gt; trace
2-element Vector{Any}:
 4
 0</code></pre><p>Notice that <span>$(43)_{10} = (101011)_2$</span>. Hence, the Hamming weight of <span>$43$</span> is <span>$4$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/parablack/CryptoSideChannel.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CryptoSideChannel.Logging.FullLog" href="#CryptoSideChannel.Logging.FullLog"><code>CryptoSideChannel.Logging.FullLog</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">FullLog(val, stream)</code></pre><p>Creates a logging datatype that logs the full underlying value.</p><p><strong>Arguments</strong></p><ul><li><code>val</code>: the value that should be wrapped around.</li><li><code>stream</code>: A <strong>closure</strong> returning the array that should be logged to. Note that <code>stream</code> must be a <code>bits</code> type.</li></ul><p><strong>Example</strong></p><pre><code class="language-">DocTestSetup = quote
    using CryptoSideChannel
end</code></pre><pre><code class="language-julia-repl">julia&gt; trace = [];

julia&gt; closure = () -&gt; trace;

julia&gt; a = Logging.FullLog(42, closure)
Log{Int64, 42}
julia&gt; b = a + 1
Log{Int64, 43}
julia&gt; c = a - 42
Log{Int64, 0}
julia&gt; trace
2-element Vector{Any}:
 43
  0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/parablack/CryptoSideChannel.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CryptoSideChannel.Logging.SingleBitLog" href="#CryptoSideChannel.Logging.SingleBitLog"><code>CryptoSideChannel.Logging.SingleBitLog</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">SingleBitLog(val, stream, bit)</code></pre><p>Creates a logging datatype that logs the value of <strong>a single bit</strong> of the underlying value. The bit that is logged is selected with the <code>bit</code> argument.</p><p><strong>Arguments</strong></p><ul><li><code>val</code>: the value that should be wrapped around.</li><li><code>stream</code>: A <strong>closure</strong> returning the array that should be logged to. Note that <code>stream</code> must be a <code>bits</code> type.</li><li><code>bit</code>: The position of the bit that should be logged, where <code>0</code> is the least significant bit.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/parablack/CryptoSideChannel.jl">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>StochasticLog</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Reduction-functions"><a class="docs-heading-anchor" href="#Reduction-functions">Reduction functions</a><a id="Reduction-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Reduction-functions" title="Permalink"></a></h2><p>A <strong>reduction function</strong> for a <code>GenericLog</code> over base type <code>T</code> should take any value of type <code>T</code>, and produce any result that eventually is logged. Reasonable choices for reduction functions could be a model of side-channel emissions. For example, the <a href="https://iacr.org/archive/ches2004/31560016/31560016.pdf">Hamming weight</a> could be a possible model which is already pre-defined. However, this framework allows free choices of reduction functions, hence providing great flexibility.</p><h3 id="Single-Function-Log"><a class="docs-heading-anchor" href="#Single-Function-Log">Single Function Log</a><a id="Single-Function-Log-1"></a><a class="docs-heading-anchor-permalink" href="#Single-Function-Log" title="Permalink"></a></h3><p>Most reduction functions simply take the intermemdiate value and output the reduced result. The type <code>SingleFunctionLog</code> captures this pattern.</p><article class="docstring"><header><a class="docstring-binding" id="CryptoSideChannel.Logging.SingleFunctionLog" href="#CryptoSideChannel.Logging.SingleFunctionLog"><code>CryptoSideChannel.Logging.SingleFunctionLog</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">abstract type SingleFunctionLog{F} &lt;: LogFunction end</code></pre><p>A wrapper for simple reduction functions that take a single argument and outputs a reduced value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/parablack/CryptoSideChannel.jl">source</a></section></article><p>For example, it is possible to define the <a href="#CryptoSideChannel.Logging.HammingWeightLog"><code>HammingWeightLog</code></a> based on this method as follows:</p><pre><code class="language-julia">HammingWeightLog(val, stream)  =
    GenericLog{SingleFunctionLog{Base.count_ones},stream,typeof(val)}(val)</code></pre><h3 id="Creating-your-own-reduction-function"><a class="docs-heading-anchor" href="#Creating-your-own-reduction-function">Creating your own reduction function</a><a id="Creating-your-own-reduction-function-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-your-own-reduction-function" title="Permalink"></a></h3><p>TODO hamming distance, explain custom <code>logValue</code></p><h2 id="extending_log_funs"><a class="docs-heading-anchor" href="#extending_log_funs">Defining new methods for <code>GenericLog</code> types</a><a id="extending_log_funs-1"></a><a class="docs-heading-anchor-permalink" href="#extending_log_funs" title="Permalink"></a></h2><p>TODO: Either explain</p><pre><code class="language-julia">function Base.$op(a::Integer, b::GenericLog{U,S}) where {U,S}
    res = Base.$op(extractValue(a), extractValue(b))
    result = GenericLog{U,S,typeof(res)}(res)
    push!(typeof(b).parameters[2](), logValue(result))
    result
end</code></pre><p>pattern or include generic code like</p><pre><code class="language-julia">registerFunction(Base.:(+))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../integer-types/">« Integer Types</a><a class="docs-footer-nextpage" href="../masking/">Masking »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 5 May 2021 09:31">Wednesday 5 May 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
